# Gmail Outlook Reply Cleaner - インストールガイド

## 📋 概要

この拡張機能は、GmailでOutlookユーザーからのメールに返信する際、無限に増える重複したmailtoリンク（`<mailto:email@domain.com>`）を自動的に削除します。

## 🚀 クイックスタート

### 必要なもの
- Google Chrome ブラウザ
- Mac（すでにお使いのMacBook Air M3で動作します）

### インストール手順

#### ステップ1: ファイルのダウンロードと展開

1. `gmail-cleanup-extension.zip` をダウンロード
2. ダウンロードフォルダでZIPファイルをダブルクリックして展開
3. `gmail-cleanup-extension` フォルダができます

#### ステップ2: Chromeでデベロッパーモードを有効化

1. Chromeを開く
2. アドレスバーに以下を入力してEnterを押す:
   ```
   chrome://extensions/
   ```
3. 右上の「デベロッパーモード」のトグルをON（青色）にする

#### ステップ3: 拡張機能を読み込む

1. 「パッケージ化されていない拡張機能を読み込む」ボタンをクリック
2. 展開した `gmail-cleanup-extension` フォルダを選択
3. 「選択」をクリック

#### ステップ4: 動作確認

1. Gmailを開く（既に開いている場合は再読み込み: ⌘+R）
2. Outlookユーザーからのメールを開いて返信
3. 自動的に重複部分が削除されます！

## 🔍 動作の確認方法

### コンソールでの確認

1. Gmailを開いた状態で、デベロッパーツールを開く（⌘+Option+I）
2. 「Console」タブをクリック
3. 以下のメッセージが表示されていれば正常に動作しています:
   ```
   Gmail Outlook Reply Cleaner: 拡張機能が起動しました
   ```

4. 返信を開始すると、クリーンアップ時に以下のメッセージが表示されます:
   ```
   Gmail Outlook Reply Cleaner: メールをクリーンアップしました
   ```

## 🛠️ トラブルシューティング

### 拡張機能が動作しない場合

#### 1. 拡張機能の状態を確認

- `chrome://extensions/` を開く
- "Gmail Outlook Reply Cleaner" が有効になっているか確認
- エラーメッセージが表示されていないか確認

#### 2. Gmailをリフレッシュ

- Gmailのタブで ⌘+R を押して再読み込み

#### 3. 拡張機能を再読み込み

- `chrome://extensions/` を開く
- 拡張機能の更新ボタン（円形の矢印）をクリック

#### 4. Chromeを再起動

- Chromeを完全に終了して再度開く

### クリーンアップが不完全な場合

特定のパターンのmailtoリンクが削除されない場合は、`content.js` をカスタマイズできます。

## 📝 ファイル構成

```
gmail-cleanup-extension/
├── manifest.json       # 拡張機能の基本設定
├── content.js         # メインのクリーンアップスクリプト
├── icon16.png         # 小アイコン（16x16）
├── icon48.png         # 中アイコン（48x48）
├── icon128.png        # 大アイコン（128x128）
├── create_icons.py    # アイコン生成スクリプト
├── README.md          # 基本的な説明
└── INSTALL_GUIDE.md   # このファイル
```

## 🎨 アイコンのカスタマイズ

デフォルトのアイコンが気に入らない場合:

1. お好みの画像編集ツールで以下のサイズの画像を作成:
   - 16x16ピクセル
   - 48x48ピクセル
   - 128x128ピクセル

2. それぞれを `icon16.png`, `icon48.png`, `icon128.png` として保存

3. `gmail-cleanup-extension` フォルダ内の既存のファイルを置き換え

4. `chrome://extensions/` で拡張機能を再読み込み

## 🔄 アップデート方法

拡張機能を更新する場合:

1. 新しいバージョンのファイルをダウンロード
2. 古い `gmail-cleanup-extension` フォルダを削除
3. 新しいフォルダを展開
4. `chrome://extensions/` で「パッケージ化されていない拡張機能を読み込む」から新しいフォルダを選択

または:

1. 既存のフォルダ内のファイルを新しいファイルで上書き
2. `chrome://extensions/` で拡張機能の更新ボタンをクリック

## ⚙️ 高度な設定

### クリーンアップの動作を調整

`content.js` を開いて、以下のパターンを調整できます:

```javascript
// パターン1: mailtoリンクのチェーン
const mailtoChainPattern = /(<mailto:[^>]+>\s*)+/gi;

// パターン2: 引用マークの繰り返し
content = content.replace(/(>\s*){4,}/g, '> ');
```

### 監視間隔の変更

デフォルトでは1秒ごとにエディタをチェックします。変更する場合:

```javascript
// 1000ミリ秒 = 1秒
setInterval(processEditors, 1000);
```

## 🐛 既知の問題

現在のところ、既知の問題はありません。問題が発生した場合は、コンソールログを確認してください。

## 📞 サポート

問題が解決しない場合:
1. デベロッパーツールのコンソールログをスクリーンショット
2. 問題が発生している具体的なメールの例を確認
3. Chrome と拡張機能のバージョンを確認

## ✅ チェックリスト

インストール前に確認:
- [ ] Google Chrome が最新版か
- [ ] Gmail にログインしているか
- [ ] デベロッパーモードを有効にしたか

インストール後に確認:
- [ ] 拡張機能が有効になっているか
- [ ] Gmailを再読み込みしたか
- [ ] コンソールに起動メッセージが表示されているか

## 🎉 完了！

これで、Outlookメールへの返信時に重複したmailtoリンクが自動的にクリーンアップされます。快適なメール作業をお楽しみください！
